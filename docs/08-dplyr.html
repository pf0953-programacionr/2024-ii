<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>PF-0953 Programación en R 2024-II - 8&nbsp; dplyr - gramática para manipulación de datos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./09-ggplot2-plotly.html" rel="next">
<link href="./07-tidyverse.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./parte-iv-graficacion-estadistica-r.html">IV - Graficación estadística en R</a></li><li class="breadcrumb-item"><a href="./08-dplyr.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">dplyr - gramática para manipulación de datos</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">PF-0953 Programación en R 2024-II</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bienvenida</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programa_curso.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programa del curso</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./parte-i-introduccion-programacion-computadoras-ciencia-datos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">I - Introducción a la programación de computadoras y a la ciencia de datos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-introduccion-programacion-computadoras.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción a la programación de computadoras</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-introduccion-ciencia-datos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introducción a la ciencia de datos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./parte-ii-lenguaje-programacion-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">II - El lenguaje de programación R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R - lenguaje de programación para análisis estadístico</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./parte-iii-herramientas-investigacion-reproducible-desarrollo-colaborativo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">III - Herramientas para investigación reproducible y desarrollo colaborativo</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-markdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Markdown - lenguaje de marcado</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Git - sistema de control de versiones</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Quarto - sistema de publicación técnica y científica</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./parte-iv-graficacion-estadistica-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">IV - Graficación estadística en R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-tidyverse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Tidyverse - colección de paquetes para ciencia de datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-dplyr.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">dplyr - gramática para manipulación de datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-ggplot2-plotly.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">ggplot2 y plotly - creación declarativa de gráficos interactivos</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="5">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#trabajo-previo" id="toc-trabajo-previo" class="nav-link active" data-scroll-target="#trabajo-previo">Trabajo previo</a>
  <ul class="collapse">
  <li><a href="#lecturas" id="toc-lecturas" class="nav-link" data-scroll-target="#lecturas">Lecturas</a></li>
  </ul></li>
  <li><a href="#introducción" id="toc-introducción" class="nav-link" data-scroll-target="#introducción">Introducción</a></li>
  <li><a href="#instalación-y-carga" id="toc-instalación-y-carga" class="nav-link" data-scroll-target="#instalación-y-carga"><span class="header-section-number">8.1</span> Instalación y carga</a></li>
  <li><a href="#conjuntos-de-datos-para-ejemplos" id="toc-conjuntos-de-datos-para-ejemplos" class="nav-link" data-scroll-target="#conjuntos-de-datos-para-ejemplos"><span class="header-section-number">8.2</span> Conjuntos de datos para ejemplos</a>
  <ul class="collapse">
  <li><a href="#pingüinos-del-archipiélago-palmer" id="toc-pingüinos-del-archipiélago-palmer" class="nav-link" data-scroll-target="#pingüinos-del-archipiélago-palmer"><span class="header-section-number">8.2.1</span> Pingüinos del archipiélago Palmer</a></li>
  <li><a href="#delitos-cometidos-en-costa-rica-en-2023" id="toc-delitos-cometidos-en-costa-rica-en-2023" class="nav-link" data-scroll-target="#delitos-cometidos-en-costa-rica-en-2023"><span class="header-section-number">8.2.2</span> Delitos cometidos en Costa Rica en 2023</a></li>
  </ul></li>
  <li><a href="#funciones" id="toc-funciones" class="nav-link" data-scroll-target="#funciones"><span class="header-section-number">8.3</span> Funciones</a>
  <ul class="collapse">
  <li><a href="#select" id="toc-select" class="nav-link" data-scroll-target="#select"><span class="header-section-number">8.3.1</span> select()</a></li>
  <li><a href="#filter" id="toc-filter" class="nav-link" data-scroll-target="#filter"><span class="header-section-number">8.3.2</span> filter()</a></li>
  <li><a href="#arrange" id="toc-arrange" class="nav-link" data-scroll-target="#arrange"><span class="header-section-number">8.3.3</span> arrange()</a></li>
  <li><a href="#mutate" id="toc-mutate" class="nav-link" data-scroll-target="#mutate"><span class="header-section-number">8.3.4</span> mutate()</a></li>
  <li><a href="#summarize" id="toc-summarize" class="nav-link" data-scroll-target="#summarize"><span class="header-section-number">8.3.5</span> summarize()</a></li>
  <li><a href="#otras" id="toc-otras" class="nav-link" data-scroll-target="#otras"><span class="header-section-number">8.3.6</span> Otras</a></li>
  </ul></li>
  <li><a href="#ejercicios" id="toc-ejercicios" class="nav-link" data-scroll-target="#ejercicios"><span class="header-section-number">8.4</span> Ejercicios</a></li>
  <li><a href="#recursos-de-interés" id="toc-recursos-de-interés" class="nav-link" data-scroll-target="#recursos-de-interés"><span class="header-section-number">8.5</span> Recursos de interés</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./parte-iv-graficacion-estadistica-r.html">IV - Graficación estadística en R</a></li><li class="breadcrumb-item"><a href="./08-dplyr.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">dplyr - gramática para manipulación de datos</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">dplyr - gramática para manipulación de datos</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="trabajo-previo" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="trabajo-previo">Trabajo previo</h2>
<section id="lecturas" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="lecturas">Lecturas</h3>
<p>Wickham, H., Çetinkaya-Rundel, M., &amp; Grolemund, G. (s. f.). <em>R for Data Science (2nd ed.) Chapter 4 - Data transformation</em>. Recuperado 5 de mayo de 2024, de <a href="https://r4ds.hadley.nz/data-transform.html" class="uri">https://r4ds.hadley.nz/data-transform.html</a></p>
</section>
</section>
<section id="introducción" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="introducción">Introducción</h2>
<p>El paquete <a href="https://dplyr.tidyverse.org/">dplyr</a> de <a href="https://www.tidyverse.org/">Tidyverse</a> es descrito como una <em>gramática para la manipulación de datos</em>, la cual proporciona un conjunto consistente de “verbos” que ayuda a solucionar los retos de procesamiento de datos más comunes. Los principales verbos (i.e.&nbsp;funciones) de esta gramática son:</p>
<p><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a>: selecciona columnas con base en sus nombres.</p>
<p><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a>: selecciona filas con base en sus valores.</p>
<p><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a>: cambia el orden de las filas.</p>
<p><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a>: crea nuevas columnas, las cuales se expresan como funciones de columnas existentes.</p>
<p><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a>: agrupa y resume valores.</p>
<p>Todas estas operaciones pueden combinarse con la función <a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a>, la cual ejecuta cualquiera de las operaciones anteriores “en grupo”. Además, dplyr proporciona <a href="https://dplyr.tidyverse.org/reference/index.html">funciones adicionales</a> para tareas más específicas.</p>
<p>Las funciones de dplyr pueden encadenarse a través del operador <em>pipe</em> (tubo), ya sea el del paquete magrittr <a href="https://magrittr.tidyverse.org/reference/pipe.html">(%&gt;%)</a> o el del paquete base de R <a href="https://michaelbarrowman.co.uk/post/the-new-base-pipe/">(|&gt;)</a>. En el material de este curso, se prefiere la segunda opción. Los <em>pipes</em> se utilizan para comunicar procesos y así formar <em>pipelines</em> (tuberías).</p>
<p>Todas las funciones de dplyr trabajan de manera similar:</p>
<ol type="1">
<li>El primer argumento siempre es un data frame. Puede omitirse si la función recibe el data frame a través del operador <em>pipe</em>.</li>
<li>Los argumentos siguientes describen que hacer con el data frame, utilizando los nombres de las columnas (sin comillas).<br>
</li>
<li>El resultado siempre es un nuevo data frame.</li>
</ol>
<p>Ya que cada función de dplyr se especializa en una sola tarea, usualmente es necesario encadenar funciones mediante <em>pipes</em> para lograr un objetivo de procesamiento de datos. Por ejemplo, el siguiente bloque de código usa tres verbos, o funciones, de dplyr para obtener la masa promedio de cada especie de pingüinos que habita en la isla Biscoe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cálculo de la masa promedio para cada especie de pingüinos</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># que habita en la isla Biscoe</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(island <span class="sc">==</span> <span class="st">"Biscoe"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">body_mass_g_mean =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>A tibble: 2 × 2
species body_mass_g_mean
&lt;fct&gt;              &lt;dbl&gt;
Adelie          3710.659
Gentoo          5076.016</code></pre>
</section>
<section id="instalación-y-carga" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="instalación-y-carga"><span class="header-section-number">8.1</span> Instalación y carga</h2>
<p>El paquete dplyr puede instalarse junto con todos los demás paquete de Tidyverse o de manera individual:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Instalación conjunta de Tidyverse</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Instalación individual</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Una vez instalado, dplyr puede cargarse con la función <code>library()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Carga conjunta de Tidyverse</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Carga individual</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Seguidamente, se cargan algunos paquetes adicionales que se utilizan en este capítulo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Carga de readr, paquete para lectura de datos</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Carga de tidyr, paquete para creación de datos "tidy"</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Carga de knitr, paquete para integrar salidas en R en documentos dinámicos</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># (ej. Quarto). En este capítulo se usa para generar tablas.</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="conjuntos-de-datos-para-ejemplos" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="conjuntos-de-datos-para-ejemplos"><span class="header-section-number">8.2</span> Conjuntos de datos para ejemplos</h2>
<p>En los ejemplos de este capítulo, se utilizan dos conjunto de datos:</p>
<ul>
<li><a href="https://allisonhorst.github.io/palmerpenguins/#about-the-data">Pingüinos del archipiélago Palmer</a>, contenido en el paquete <a href="https://allisonhorst.github.io/palmerpenguins/">palmerpenguins</a>.</li>
<li><a href="https://sitiooij.poder-judicial.go.cr/phocadownload/Estadisticas/estadsticaspoliciales2023.xlsx">Delitos cometidos en Costa Rica en 2023</a>, disponibles en el <a href="https://sitiooij.poder-judicial.go.cr/index.php/ayuda/servicios-policiales/servicios-a-organizaciones/indice-de-transparencia-del-sector-publico-costarricense/datos-abiertos">sitio Datos Abiertos del Organismo de Investigación Judicial (OIJ)</a>.</li>
</ul>
<section id="pingüinos-del-archipiélago-palmer" class="level3" data-number="8.2.1">
<h3 data-number="8.2.1" class="anchored" data-anchor-id="pingüinos-del-archipiélago-palmer"><span class="header-section-number">8.2.1</span> Pingüinos del archipiélago Palmer</h3>
<p>Para cargar el conjunto de datos <code>penguins</code>, basta con cargar el paquete <code>palmerpenguins</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Carga del paquete de datos palmerpenguins</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La función <a href="https://dplyr.tidyverse.org/reference/glimpse.html">glimpse()</a> despliega la estructura de un conjunto de datos, incluyendo los nombres de las columnas, sus tipos de datos y una muestra de estos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estructura del conjunto de datos penguins</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(penguins)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 8
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…</code></pre>
</div>
</div>
<p>La función también puede llamarse mediante un <em>pipe</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estructura del conjunto de datos penguins</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 8
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…</code></pre>
</div>
</div>
<p>Un conjunto de datos puede visualizarse al escribir su nombre en la consola de R o en un programa:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Despliegue de los datos de penguins</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>penguins</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 334 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p><code>penguins</code> es un <a href="https://tibble.tidyverse.org/">tibble</a>, un tipo especial de data frame que se utiliza en Tidyverse. La diferencia más importante entre un tibble y un data frame es la manera en la que se imprimen: los tibbles están diseñados para conjuntos de datos grandes, por lo que solo muestran los primeros registros y las columnas que caben en la pantalla. Un data frame regular muestra todas sus columnas y muchos más registros, lo que dificulta su visualización. Note la diferencia, por ejemplo, con la forma en la que se despliega el conjunto de datos <code>iris</code> (observe también la diferencia entre las salidas de <code>class(iris)</code> y <code>class(penguins)</code>). A pesar de estas diferencias en el despliegue, en general, un data frame regular y un tibble pueden tratarse indistintamente.</p>
<p>Para generar una salida más estilizada, puede usarse la función <a href="https://rdrr.io/cran/knitr/man/kable.html">knitr::kable()</a>, la cual genera tablas para documentos web. En el siguiente ejemplo, se obtienen los primeros registros de penguins con la función <a href="https://rdrr.io/r/utils/head.html">head()</a> y se despliegan en una tabla mediante <code>kable()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Despliegue de los primeros registros de penguins en una tabla kable</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">format =</span> <span class="st">"html"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">species</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">island</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">bill_length_mm</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">bill_depth_mm</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">flipper_length_mm</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">body_mass_g</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">sex</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">39.1</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">181</td>
<td style="text-align: right;">3750</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">2007</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">39.5</td>
<td style="text-align: right;">17.4</td>
<td style="text-align: right;">186</td>
<td style="text-align: right;">3800</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">2007</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">40.3</td>
<td style="text-align: right;">18.0</td>
<td style="text-align: right;">195</td>
<td style="text-align: right;">3250</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">2007</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">2007</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">36.7</td>
<td style="text-align: right;">19.3</td>
<td style="text-align: right;">193</td>
<td style="text-align: right;">3450</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">2007</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">39.3</td>
<td style="text-align: right;">20.6</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">3650</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">2007</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">38.9</td>
<td style="text-align: right;">17.8</td>
<td style="text-align: right;">181</td>
<td style="text-align: right;">3625</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">2007</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">39.2</td>
<td style="text-align: right;">19.6</td>
<td style="text-align: right;">195</td>
<td style="text-align: right;">4675</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">2007</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">34.1</td>
<td style="text-align: right;">18.1</td>
<td style="text-align: right;">193</td>
<td style="text-align: right;">3475</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">2007</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adelie</td>
<td style="text-align: left;">Torgersen</td>
<td style="text-align: right;">42.0</td>
<td style="text-align: right;">20.2</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">4250</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">2007</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="delitos-cometidos-en-costa-rica-en-2023" class="level3" data-number="8.2.2">
<h3 data-number="8.2.2" class="anchored" data-anchor-id="delitos-cometidos-en-costa-rica-en-2023"><span class="header-section-number">8.2.2</span> Delitos cometidos en Costa Rica en 2023</h3>
<p>Se utiliza la función <a href="https://readr.tidyverse.org/reference/read_delim.html">readr::read_csv()</a> para leer un archivo CSV almacenado en el repositorio GitHub de este curso, con los datos de las estadísticas policiales proporcionados por el OIJ en formato Excel. <code>readr::read_csv()</code> es más eficiente que <code>read.csv()</code> (del paquete base de R) y tiene otras ventajas como detección automática de tipos de datos y mejor integración con otros paquetes de Tidyverse (ej. dplyr, tidyr, ggplot2).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Carga de los datos de delitos cometidos en 2023</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>delitos_2023 <span class="ot">&lt;-</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://raw.githubusercontent.com/gf0604-procesamientodatosgeograficos/2024-i/main/datos/oij/estadisticas-policiales/estadisticaspoliciales2023.csv"</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Estructura del conjunto de datos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estructura de los datos de delitos cometidos en 2023</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(delitos_2023)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 49,609
Columns: 12
$ Delito       &lt;chr&gt; "ASALTO", "ASALTO", "HURTO", "ASALTO", "ASALTO", "HURTO",…
$ SubDelito    &lt;chr&gt; "ARMA BLANCA", "ARMA BLANCA", "ARDID PREVIO/DISTRACCION",…
$ Fecha        &lt;chr&gt; "12/31/2023", "12/31/2023", "12/31/2023", "12/31/2023", "…
$ Hora         &lt;chr&gt; "21:00:00 - 23:59:59", "21:00:00 - 23:59:59", "21:00:00 -…
$ Victima      &lt;chr&gt; "PERSONA", "PERSONA", "PERSONA", "PERSONA", "PERSONA", "V…
$ SubVictima   &lt;chr&gt; "PEATON [PERSONA]", "PEATON [PERSONA]", "TAXISTA [PERSONA…
$ Edad         &lt;chr&gt; "Mayor de edad", "Mayor de edad", "Mayor de edad", "Mayor…
$ Genero       &lt;chr&gt; "HOMBRE", "MUJER", "HOMBRE", "HOMBRE", "HOMBRE", "MUJER",…
$ Nacionalidad &lt;chr&gt; "COSTA RICA", "COSTA RICA", "COSTA RICA", "NICARAGUA", "C…
$ Provincia    &lt;chr&gt; "SAN JOSE", "SAN JOSE", "SAN JOSE", "SAN JOSE", "SAN JOSE…
$ Canton       &lt;chr&gt; "SAN JOSE", "MORAVIA", "DESAMPARADOS", "SAN JOSE", "SAN J…
$ Distrito     &lt;chr&gt; "MERCED", "SAN VICENTE", "SAN MIGUEL", "HOSPITAL", "HOSPI…</code></pre>
</div>
</div>
<p>Despliegue de los datos (debido a que <code>delitos_2023</code> es un data frame, pero no un tibble, se limitan manualmente las filas y columnas que se muestran):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Despliegue de los primeros registros de delitos en una tabla kable</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>delitos_2023 <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">format =</span> <span class="st">"html"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Delito</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SubDelito</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Fecha</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Hora</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Victima</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SubVictima</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Edad</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Genero</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Nacionalidad</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Provincia</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Canton</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Distrito</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">ARMA BLANCA</td>
<td style="text-align: left;">12/31/2023</td>
<td style="text-align: left;">21:00:00 - 23:59:59</td>
<td style="text-align: left;">PERSONA</td>
<td style="text-align: left;">PEATON [PERSONA]</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">HOMBRE</td>
<td style="text-align: left;">COSTA RICA</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">MERCED</td>
</tr>
<tr class="even">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">ARMA BLANCA</td>
<td style="text-align: left;">12/31/2023</td>
<td style="text-align: left;">21:00:00 - 23:59:59</td>
<td style="text-align: left;">PERSONA</td>
<td style="text-align: left;">PEATON [PERSONA]</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">MUJER</td>
<td style="text-align: left;">COSTA RICA</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">MORAVIA</td>
<td style="text-align: left;">SAN VICENTE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">ARDID PREVIO/DISTRACCION</td>
<td style="text-align: left;">12/31/2023</td>
<td style="text-align: left;">21:00:00 - 23:59:59</td>
<td style="text-align: left;">PERSONA</td>
<td style="text-align: left;">TAXISTA [PERSONA]</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">HOMBRE</td>
<td style="text-align: left;">COSTA RICA</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">DESAMPARADOS</td>
<td style="text-align: left;">SAN MIGUEL</td>
</tr>
<tr class="even">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">INMOVILIZACION</td>
<td style="text-align: left;">12/31/2023</td>
<td style="text-align: left;">21:00:00 - 23:59:59</td>
<td style="text-align: left;">PERSONA</td>
<td style="text-align: left;">PEATON [PERSONA]</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">HOMBRE</td>
<td style="text-align: left;">NICARAGUA</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">HOSPITAL</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">ARMA DE FUEGO</td>
<td style="text-align: left;">12/31/2023</td>
<td style="text-align: left;">21:00:00 - 23:59:59</td>
<td style="text-align: left;">PERSONA</td>
<td style="text-align: left;">PEATON [PERSONA]</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">HOMBRE</td>
<td style="text-align: left;">COSTA RICA</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">HOSPITAL</td>
</tr>
<tr class="even">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">POR DESCUIDO</td>
<td style="text-align: left;">12/31/2023</td>
<td style="text-align: left;">21:00:00 - 23:59:59</td>
<td style="text-align: left;">VIVIENDA</td>
<td style="text-align: left;">NO APLICA [VIVIENDA]</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">MUJER</td>
<td style="text-align: left;">COSTA RICA</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">DOTA</td>
<td style="text-align: left;">JARDIN</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">ARREBATO</td>
<td style="text-align: left;">12/31/2023</td>
<td style="text-align: left;">21:00:00 - 23:59:59</td>
<td style="text-align: left;">PERSONA</td>
<td style="text-align: left;">PASAJERO DE TRANSPORTE PUBLICO [PERSONA]</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">MUJER</td>
<td style="text-align: left;">COSTA RICA</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">DESCONOCIDO</td>
</tr>
<tr class="even">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">GOLPES</td>
<td style="text-align: left;">12/31/2023</td>
<td style="text-align: left;">21:00:00 - 23:59:59</td>
<td style="text-align: left;">PERSONA</td>
<td style="text-align: left;">PEATON [PERSONA]</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">HOMBRE</td>
<td style="text-align: left;">COSTA RICA</td>
<td style="text-align: left;">PUNTARENAS</td>
<td style="text-align: left;">CORREDORES</td>
<td style="text-align: left;">CORREDOR</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">INMOVILIZACION</td>
<td style="text-align: left;">12/31/2023</td>
<td style="text-align: left;">21:00:00 - 23:59:59</td>
<td style="text-align: left;">PERSONA</td>
<td style="text-align: left;">PEATON [PERSONA]</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">HOMBRE</td>
<td style="text-align: left;">ITALIA</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">HATILLO</td>
</tr>
<tr class="even">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">CON LLAVE</td>
<td style="text-align: left;">12/31/2023</td>
<td style="text-align: left;">21:00:00 - 23:59:59</td>
<td style="text-align: left;">VIVIENDA</td>
<td style="text-align: left;">NO APLICA [VIVIENDA]</td>
<td style="text-align: left;">Adulto Mayor</td>
<td style="text-align: left;">MUJER</td>
<td style="text-align: left;">COSTA RICA</td>
<td style="text-align: left;">GUANACASTE</td>
<td style="text-align: left;">NICOYA</td>
<td style="text-align: left;">NICOYA</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
</section>
<section id="funciones" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="funciones"><span class="header-section-number">8.3</span> Funciones</h2>
<p>En esta sección, se describen y ejemplifican las principales funciones de dplyr.</p>
<section id="select" class="level3" data-number="8.3.1">
<h3 data-number="8.3.1" class="anchored" data-anchor-id="select"><span class="header-section-number">8.3.1</span> select()</h3>
<p>La función <a href="https://dplyr.tidyverse.org/reference/select.html">select()</a> selecciona (y opcionalmente renombra) columnas de un data frame con base en sus nombres.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selección de las columnas species, bill_length_mm y sex</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, bill_length_mm, sex)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 3
   species bill_length_mm sex   
   &lt;fct&gt;            &lt;dbl&gt; &lt;fct&gt; 
 1 Adelie            39.1 male  
 2 Adelie            39.5 female
 3 Adelie            40.3 female
 4 Adelie            NA   &lt;NA&gt;  
 5 Adelie            36.7 female
 6 Adelie            39.3 male  
 7 Adelie            38.9 female
 8 Adelie            39.2 male  
 9 Adelie            34.1 &lt;NA&gt;  
10 Adelie            42   &lt;NA&gt;  
# ℹ 334 more rows</code></pre>
</div>
</div>
<p>Cambio de nombres de columnas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selección y cambio de nombre de las columnas </span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># species, bill_length_mm y sex</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">especie =</span> species,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">longitud_pico_mm =</span> bill_length_mm,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">sexo =</span> sex)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 3
   especie longitud_pico_mm sexo  
   &lt;fct&gt;              &lt;dbl&gt; &lt;fct&gt; 
 1 Adelie              39.1 male  
 2 Adelie              39.5 female
 3 Adelie              40.3 female
 4 Adelie              NA   &lt;NA&gt;  
 5 Adelie              36.7 female
 6 Adelie              39.3 male  
 7 Adelie              38.9 female
 8 Adelie              39.2 male  
 9 Adelie              34.1 &lt;NA&gt;  
10 Adelie              42   &lt;NA&gt;  
# ℹ 334 more rows</code></pre>
</div>
</div>
<p>El operador <code>:</code> permite seleccionar un rango de columnas continuas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selección de las columnas desde species a flipper_length_mm</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species<span class="sc">:</span>flipper_length_mm)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 5
   species island    bill_length_mm bill_depth_mm flipper_length_mm
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181
 2 Adelie  Torgersen           39.5          17.4               186
 3 Adelie  Torgersen           40.3          18                 195
 4 Adelie  Torgersen           NA            NA                  NA
 5 Adelie  Torgersen           36.7          19.3               193
 6 Adelie  Torgersen           39.3          20.6               190
 7 Adelie  Torgersen           38.9          17.8               181
 8 Adelie  Torgersen           39.2          19.6               195
 9 Adelie  Torgersen           34.1          18.1               193
10 Adelie  Torgersen           42            20.2               190
# ℹ 334 more rows</code></pre>
</div>
</div>
<p>Selección de todas las columnas que cumplen una condición:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selección de las columnas numéricas</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 5
   bill_length_mm bill_depth_mm flipper_length_mm body_mass_g  year
            &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;int&gt;
 1           39.1          18.7               181        3750  2007
 2           39.5          17.4               186        3800  2007
 3           40.3          18                 195        3250  2007
 4           NA            NA                  NA          NA  2007
 5           36.7          19.3               193        3450  2007
 6           39.3          20.6               190        3650  2007
 7           38.9          17.8               181        3625  2007
 8           39.2          19.6               195        4675  2007
 9           34.1          18.1               193        3475  2007
10           42            20.2               190        4250  2007
# ℹ 334 more rows</code></pre>
</div>
</div>
</section>
<section id="filter" class="level3" data-number="8.3.2">
<h3 data-number="8.3.2" class="anchored" data-anchor-id="filter"><span class="header-section-number">8.3.2</span> filter()</h3>
<p>La función <a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a> retorna un subconjunto de un data frame con todas las filas que satisfacen una condición (i.e.&nbsp;expresión lógica).</p>
<p>Puede utilizar los operadores relacionales:</p>
<ul>
<li><code>==</code> (igual que) <strong>Note la diferencia con el operador de asignación (<code>=</code>)</strong></li>
<li><code>!=</code> (diferente de)</li>
<li><code>&gt;</code> (estrictamente mayor que), <code>&gt;=</code> (mayor o igual que)</li>
<li><code>&lt;</code> (estrictamente menor que), <code>&lt;=</code> (menor o igual que)</li>
</ul>
<p>Y los operadores lógicos:</p>
<ul>
<li><code>&amp;</code> (<em>AND</em> o Y lógico)</li>
<li><code>|</code> (<em>OR</em> u O lógico)</li>
<li><code>!</code> (<em>NOT</em> o NO lógico)</li>
</ul>
<p>Ejemplos de uso de expresiones y operadores lógicos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pingüinos de la especie 'Adelie' </span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># con longitud del pico mayor o igual a 45 mm</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">'Adelie'</span> <span class="sc">&amp;</span> bill_length_mm <span class="sc">&gt;=</span> <span class="dv">45</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 8
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Torgersen           46            21.5               194        4200
2 Adelie  Torgersen           45.8          18.9               197        4150
3 Adelie  Biscoe              45.6          20.3               191        4600
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pingüinos de las especies 'Adelie' o 'Gentoo'</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">'Adelie'</span> <span class="sc">|</span> species <span class="sc">==</span> <span class="st">'Gentoo'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 276 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 266 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pingüinos de especies diferentes a 'Chinstrap'</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(species <span class="sc">==</span> <span class="st">'Chinstrap'</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 276 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 266 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Homicidios cometidos en el cantón de Sarapiquí</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>delitos_2023 <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Delito <span class="sc">==</span> <span class="st">"HOMICIDIO"</span> <span class="sc">&amp;</span> Canton <span class="sc">==</span> <span class="st">"SARAPIQUI"</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Canton, SubDelito, Fecha, Edad, Nacionalidad) <span class="sc">|&gt;</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 12%">
<col style="width: 39%">
<col style="width: 13%">
<col style="width: 17%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Canton</th>
<th style="text-align: left;">SubDelito</th>
<th style="text-align: left;">Fecha</th>
<th style="text-align: left;">Edad</th>
<th style="text-align: left;">Nacionalidad</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">DISCUSION/RIÑA</td>
<td style="text-align: left;">12/06/2023</td>
<td style="text-align: left;">Desconocido</td>
<td style="text-align: left;">COSTA RICA</td>
</tr>
<tr class="even">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">10/28/2023</td>
<td style="text-align: left;">Desconocido</td>
<td style="text-align: left;">Desconocido</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">10/16/2023</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">COSTA RICA</td>
</tr>
<tr class="even">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">09/30/2023</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">COSTA RICA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">09/28/2023</td>
<td style="text-align: left;">Desconocido</td>
<td style="text-align: left;">Desconocido</td>
</tr>
<tr class="even">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">07/28/2023</td>
<td style="text-align: left;">Desconocido</td>
<td style="text-align: left;">Desconocido</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">07/07/2023</td>
<td style="text-align: left;">Desconocido</td>
<td style="text-align: left;">Desconocido</td>
</tr>
<tr class="even">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">07/05/2023</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">COSTA RICA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">06/25/2023</td>
<td style="text-align: left;">Desconocido</td>
<td style="text-align: left;">Desconocido</td>
</tr>
<tr class="even">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">05/31/2023</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">COSTA RICA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">05/22/2023</td>
<td style="text-align: left;">Desconocido</td>
<td style="text-align: left;">COSTA RICA</td>
</tr>
<tr class="even">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">DISCUSION/RIÑA</td>
<td style="text-align: left;">05/16/2023</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">COSTA RICA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">04/12/2023</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">COSTA RICA</td>
</tr>
<tr class="even">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">POR LA COMISION DE OTRO DELITO</td>
<td style="text-align: left;">03/18/2023</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">NICARAGUA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">DISCUSION/RIÑA</td>
<td style="text-align: left;">03/13/2023</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">COSTA RICA</td>
</tr>
<tr class="even">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">02/16/2023</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">Desconocido</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">01/31/2023</td>
<td style="text-align: left;">Adulto Mayor</td>
<td style="text-align: left;">COSTA RICA</td>
</tr>
<tr class="even">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">01/31/2023</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">COSTA RICA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">01/07/2023</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">COSTA RICA</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Homicidios cometidos en el cantón de Sarapiquí </span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># a personas no costarricenses</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>delitos_2023 <span class="sc">|&gt;</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Delito <span class="sc">==</span> <span class="st">"HOMICIDIO"</span> <span class="sc">&amp;</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>           Canton <span class="sc">==</span> <span class="st">"SARAPIQUI"</span> <span class="sc">&amp;</span> Nacionalidad <span class="sc">!=</span> <span class="st">"COSTA RICA"</span>) <span class="sc">|&gt;</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Canton, SubDelito, Fecha, Edad, Nacionalidad) <span class="sc">|&gt;</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 12%">
<col style="width: 39%">
<col style="width: 13%">
<col style="width: 17%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Canton</th>
<th style="text-align: left;">SubDelito</th>
<th style="text-align: left;">Fecha</th>
<th style="text-align: left;">Edad</th>
<th style="text-align: left;">Nacionalidad</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">10/28/2023</td>
<td style="text-align: left;">Desconocido</td>
<td style="text-align: left;">Desconocido</td>
</tr>
<tr class="even">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">09/28/2023</td>
<td style="text-align: left;">Desconocido</td>
<td style="text-align: left;">Desconocido</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">07/28/2023</td>
<td style="text-align: left;">Desconocido</td>
<td style="text-align: left;">Desconocido</td>
</tr>
<tr class="even">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">07/07/2023</td>
<td style="text-align: left;">Desconocido</td>
<td style="text-align: left;">Desconocido</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">06/25/2023</td>
<td style="text-align: left;">Desconocido</td>
<td style="text-align: left;">Desconocido</td>
</tr>
<tr class="even">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">POR LA COMISION DE OTRO DELITO</td>
<td style="text-align: left;">03/18/2023</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">NICARAGUA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: left;">02/16/2023</td>
<td style="text-align: left;">Mayor de edad</td>
<td style="text-align: left;">Desconocido</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pingüinos con longitud del pico mayor o igual al promedio</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   El argumento lógico na.rm de mean() </span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   indica si los valores NA ("not available") </span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   deben ser removidos antes del cálculo</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(bill_length_mm <span class="sc">&gt;=</span> <span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 175 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           46            21.5               194        4200
 2 Adelie  Dream               44.1          19.7               196        4400
 3 Adelie  Torgersen           45.8          18.9               197        4150
 4 Adelie  Biscoe              45.6          20.3               191        4600
 5 Adelie  Torgersen           44.1          18                 210        4000
 6 Gentoo  Biscoe              46.1          13.2               211        4500
 7 Gentoo  Biscoe              50            16.3               230        5700
 8 Gentoo  Biscoe              48.7          14.1               210        4450
 9 Gentoo  Biscoe              50            15.2               218        5700
10 Gentoo  Biscoe              47.6          14.5               215        5400
# ℹ 165 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p>Condiciones relacionadas con valores <code>NA</code> (nulos):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filas con valor NA en la columna sex</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, island, sex) <span class="sc">|&gt;</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(sex))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 3
   species island    sex  
   &lt;fct&gt;   &lt;fct&gt;     &lt;fct&gt;
 1 Adelie  Torgersen &lt;NA&gt; 
 2 Adelie  Torgersen &lt;NA&gt; 
 3 Adelie  Torgersen &lt;NA&gt; 
 4 Adelie  Torgersen &lt;NA&gt; 
 5 Adelie  Torgersen &lt;NA&gt; 
 6 Adelie  Dream     &lt;NA&gt; 
 7 Gentoo  Biscoe    &lt;NA&gt; 
 8 Gentoo  Biscoe    &lt;NA&gt; 
 9 Gentoo  Biscoe    &lt;NA&gt; 
10 Gentoo  Biscoe    &lt;NA&gt; 
11 Gentoo  Biscoe    &lt;NA&gt; </code></pre>
</div>
</div>
<p>La función <a href="https://tidyr.tidyverse.org/reference/drop_na.html">tidyr::drop_na()</a> remueve las filas con valores <code>NA</code> en una o varias columnas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filas con valor diferente a NA en la columna sex</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>         bill_length_mm,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>         bill_depth_mm,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>         flipper_length_mm,</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>         body_mass_g,</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>         sex) <span class="sc">|&gt;</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(sex)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 333 × 6
   species bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex   
   &lt;fct&gt;            &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt; 
 1 Adelie            39.1          18.7               181        3750 male  
 2 Adelie            39.5          17.4               186        3800 female
 3 Adelie            40.3          18                 195        3250 female
 4 Adelie            36.7          19.3               193        3450 female
 5 Adelie            39.3          20.6               190        3650 male  
 6 Adelie            38.9          17.8               181        3625 female
 7 Adelie            39.2          19.6               195        4675 male  
 8 Adelie            41.1          17.6               182        3200 female
 9 Adelie            38.6          21.2               191        3800 male  
10 Adelie            34.6          21.1               198        4400 male  
# ℹ 323 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filas con valor diferente a NA en cualquier columna</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>         bill_length_mm,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>         bill_depth_mm,</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>         flipper_length_mm,</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>         body_mass_g,</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>         sex) <span class="sc">|&gt;</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 333 × 6
   species bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex   
   &lt;fct&gt;            &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt; 
 1 Adelie            39.1          18.7               181        3750 male  
 2 Adelie            39.5          17.4               186        3800 female
 3 Adelie            40.3          18                 195        3250 female
 4 Adelie            36.7          19.3               193        3450 female
 5 Adelie            39.3          20.6               190        3650 male  
 6 Adelie            38.9          17.8               181        3625 female
 7 Adelie            39.2          19.6               195        4675 male  
 8 Adelie            41.1          17.6               182        3200 female
 9 Adelie            38.6          21.2               191        3800 male  
10 Adelie            34.6          21.1               198        4400 male  
# ℹ 323 more rows</code></pre>
</div>
</div>
</section>
<section id="arrange" class="level3" data-number="8.3.3">
<h3 data-number="8.3.3" class="anchored" data-anchor-id="arrange"><span class="header-section-number">8.3.3</span> arrange()</h3>
<p>La función <a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a> cambia el orden de las filas de un data frame de acuerdo con los valores de las columnas seleccionadas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenamiento ascendente por las columnas </span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co"># bill_length_mm y bill_depth_mm</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(bill_length_mm, bill_depth_mm)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Dream               32.1          15.5               188        3050
 2 Adelie  Dream               33.1          16.1               178        2900
 3 Adelie  Torgersen           33.5          19                 190        3600
 4 Adelie  Dream               34            17.1               185        3400
 5 Adelie  Torgersen           34.1          18.1               193        3475
 6 Adelie  Torgersen           34.4          18.4               184        3325
 7 Adelie  Biscoe              34.5          18.1               187        2900
 8 Adelie  Torgersen           34.6          17.2               189        3200
 9 Adelie  Torgersen           34.6          21.1               198        4400
10 Adelie  Biscoe              35            17.9               190        3450
# ℹ 334 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p>Por defecto, las columnas se ordenan de manera acendente. Si se desea un orden descendente, puede utilizarse la función <a href="https://dplyr.tidyverse.org/reference/desc.html">desc()</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenamiento descendente por las columnas </span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co"># bill_length_mm y bill_depth_mm</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(bill_length_mm), <span class="fu">desc</span>(bill_depth_mm))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
   species   island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;     &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Gentoo    Biscoe           59.6          17                 230        6050
 2 Chinstrap Dream            58            17.8               181        3700
 3 Gentoo    Biscoe           55.9          17                 228        5600
 4 Chinstrap Dream            55.8          19.8               207        4000
 5 Gentoo    Biscoe           55.1          16                 230        5850
 6 Gentoo    Biscoe           54.3          15.7               231        5650
 7 Chinstrap Dream            54.2          20.8               201        4300
 8 Chinstrap Dream            53.5          19.9               205        4500
 9 Gentoo    Biscoe           53.4          15.8               219        5500
10 Chinstrap Dream            52.8          20                 205        4550
# ℹ 334 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p>Nótese que los valores <code>NA</code> se ubican al final de cualquier ordenamiento.</p>
</section>
<section id="mutate" class="level3" data-number="8.3.4">
<h3 data-number="8.3.4" class="anchored" data-anchor-id="mutate"><span class="header-section-number">8.3.4</span> mutate()</h3>
<p>La función <a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a> crea o modifica columnas en un data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creación de la columna body_mass_kg,</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># correspondiente al valor de body_mass_g, pero expresado en kg</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, body_mass_g) <span class="sc">|&gt;</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">body_mass_kg =</span> body_mass_g<span class="sc">/</span><span class="dv">1000</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 3
   species body_mass_g body_mass_kg
   &lt;fct&gt;         &lt;int&gt;        &lt;dbl&gt;
 1 Adelie         3750         3.75
 2 Adelie         3800         3.8 
 3 Adelie         3250         3.25
 4 Adelie           NA        NA   
 5 Adelie         3450         3.45
 6 Adelie         3650         3.65
 7 Adelie         3625         3.62
 8 Adelie         4675         4.68
 9 Adelie         3475         3.48
10 Adelie         4250         4.25
# ℹ 334 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creación de las columnas body_mass_g_mean (promedio de masa) y</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co"># body_mass_g_normalized (masa normalizada con respecto al promedio)</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, body_mass_g) <span class="sc">|&gt;</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">body_mass_g_mean =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">body_mass_g_normalized =</span> body_mass_g <span class="sc">/</span> body_mass_g_mean)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
   species body_mass_g body_mass_g_mean body_mass_g_normalized
   &lt;fct&gt;         &lt;int&gt;            &lt;dbl&gt;                  &lt;dbl&gt;
 1 Adelie         3750            4202.                  0.892
 2 Adelie         3800            4202.                  0.904
 3 Adelie         3250            4202.                  0.773
 4 Adelie           NA            4202.                 NA    
 5 Adelie         3450            4202.                  0.821
 6 Adelie         3650            4202.                  0.869
 7 Adelie         3625            4202.                  0.863
 8 Adelie         4675            4202.                  1.11 
 9 Adelie         3475            4202.                  0.827
10 Adelie         4250            4202.                  1.01 
# ℹ 334 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creación de las columnas </span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Fecha_Date (tipo Date), Anio, Mes y Dia (enteros)</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>delitos_2023 <span class="sc">|&gt;</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Fecha) <span class="sc">|&gt;</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Fecha_Date =</span> <span class="fu">as.Date</span>(delitos_2023<span class="sc">$</span>Fecha, <span class="at">format=</span><span class="st">"%m/%d/%Y"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Anio =</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(<span class="fu">as.Date</span>(delitos_2023<span class="sc">$</span>Fecha, <span class="at">format=</span><span class="st">"%m/%d/%Y"</span>), <span class="st">"%Y"</span>))) <span class="sc">|&gt;</span>  </span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Dia =</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(<span class="fu">as.Date</span>(delitos_2023<span class="sc">$</span>Fecha, <span class="at">format=</span><span class="st">"%m/%d/%Y"</span>), <span class="st">"%m"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Mes =</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(<span class="fu">as.Date</span>(delitos_2023<span class="sc">$</span>Fecha, <span class="at">format=</span><span class="st">"%m/%d/%Y"</span>), <span class="st">"%d"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 5
   Fecha      Fecha_Date  Anio   Dia   Mes
   &lt;chr&gt;      &lt;date&gt;     &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1 12/31/2023 2023-12-31  2023    12    31
 2 12/31/2023 2023-12-31  2023    12    31
 3 12/31/2023 2023-12-31  2023    12    31
 4 12/31/2023 2023-12-31  2023    12    31
 5 12/31/2023 2023-12-31  2023    12    31
 6 12/31/2023 2023-12-31  2023    12    31
 7 12/31/2023 2023-12-31  2023    12    31
 8 12/31/2023 2023-12-31  2023    12    31
 9 12/31/2023 2023-12-31  2023    12    31
10 12/31/2023 2023-12-31  2023    12    31</code></pre>
</div>
</div>
<p>La función <a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a> agrupa una o más columnas. Generalmente, esto se hace con el objetivo de rea</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creación de la columnas </span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co"># body_mass_g_mean_species (promedio de masa de la especie) y</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co"># body_mass_g_species_normalized (masa normalizada con respecto al promedio de la especie)</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, body_mass_g) <span class="sc">|&gt;</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">body_mass_g_mean_species =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">body_mass_g_species_normalized =</span> body_mass_g <span class="sc">/</span> body_mass_g_mean_species)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
# Groups:   species [3]
   species body_mass_g body_mass_g_mean_species body_mass_g_species_normalized
   &lt;fct&gt;         &lt;int&gt;                    &lt;dbl&gt;                          &lt;dbl&gt;
 1 Adelie         3750                    3701.                          1.01 
 2 Adelie         3800                    3701.                          1.03 
 3 Adelie         3250                    3701.                          0.878
 4 Adelie           NA                    3701.                         NA    
 5 Adelie         3450                    3701.                          0.932
 6 Adelie         3650                    3701.                          0.986
 7 Adelie         3625                    3701.                          0.980
 8 Adelie         4675                    3701.                          1.26 
 9 Adelie         3475                    3701.                          0.939
10 Adelie         4250                    3701.                          1.15 
# ℹ 334 more rows</code></pre>
</div>
</div>
</section>
<section id="summarize" class="level3" data-number="8.3.5">
<h3 data-number="8.3.5" class="anchored" data-anchor-id="summarize"><span class="header-section-number">8.3.5</span> summarize()</h3>
<p>La función <a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a> se utiliza generalmente junto con la función <a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a> para realizar cálculos en grupos de filas de un data frame. <code>group_by()</code> agrupa las filas y <code>summarize()</code> realiza los cálculos (ej. sumas, promedios) en las columnas, para cada grupo. El resultado es un nuevo data frame con una fila por grupo. Si no hay agrupación, se retorna una sola fila correspondiente a los cálculos para todo el data frame.</p>
<p>Ejemplos de cálculos en grupos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mmínimo, máximo, promedio de masa y cantidad de individuos </span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co"># para cada especie de pingüinos</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">|&gt;</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">body_mass_g_min =</span> <span class="fu">min</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">body_mass_g_max =</span> <span class="fu">max</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">body_mass_g_mean =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  species   body_mass_g_min body_mass_g_max body_mass_g_mean     n
  &lt;fct&gt;               &lt;int&gt;           &lt;int&gt;            &lt;dbl&gt; &lt;int&gt;
1 Adelie               2850            4775            3701.   152
2 Chinstrap            2700            4800            3733.    68
3 Gentoo               3950            6300            5076.   124</code></pre>
</div>
</div>
<p>La función <a href="https://dplyr.tidyverse.org/reference/context.html">n()</a> cuenta la cantidad de filas en un grupo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cantidad de homicidios por provincia y cantón</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>delitos_2023 <span class="sc">|&gt;</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Delito <span class="sc">==</span> <span class="st">"HOMICIDIO"</span>) <span class="sc">|&gt;</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Provincia, Canton) <span class="sc">|&gt;</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">homicidios_2023 =</span> <span class="fu">n</span>()</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(homicidios_2023)) <span class="sc">|&gt;</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Provincia</th>
<th style="text-align: left;">Canton</th>
<th style="text-align: right;">homicidios_2023</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">LIMON</td>
<td style="text-align: left;">LIMON</td>
<td style="text-align: right;">91</td>
</tr>
<tr class="even">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: right;">82</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PUNTARENAS</td>
<td style="text-align: left;">PUNTARENAS</td>
<td style="text-align: right;">68</td>
</tr>
<tr class="even">
<td style="text-align: left;">LIMON</td>
<td style="text-align: left;">MATINA</td>
<td style="text-align: right;">50</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ALAJUELA</td>
<td style="text-align: left;">ALAJUELA</td>
<td style="text-align: right;">44</td>
</tr>
<tr class="even">
<td style="text-align: left;">LIMON</td>
<td style="text-align: left;">POCOCI</td>
<td style="text-align: right;">31</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GUANACASTE</td>
<td style="text-align: left;">NICOYA</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="even">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">DESAMPARADOS</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GUANACASTE</td>
<td style="text-align: left;">SANTA CRUZ</td>
<td style="text-align: right;">24</td>
</tr>
<tr class="even">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">ALAJUELITA</td>
<td style="text-align: right;">23</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CARTAGO</td>
<td style="text-align: left;">CARTAGO</td>
<td style="text-align: right;">21</td>
</tr>
<tr class="even">
<td style="text-align: left;">LIMON</td>
<td style="text-align: left;">SIQUIRRES</td>
<td style="text-align: right;">21</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">GOICOECHEA</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="even">
<td style="text-align: left;">ALAJUELA</td>
<td style="text-align: left;">SAN CARLOS</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HEREDIA</td>
<td style="text-align: left;">SARAPIQUI</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARTAGO</td>
<td style="text-align: left;">PARAISO</td>
<td style="text-align: right;">17</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HEREDIA</td>
<td style="text-align: left;">HEREDIA</td>
<td style="text-align: right;">17</td>
</tr>
<tr class="even">
<td style="text-align: left;">PUNTARENAS</td>
<td style="text-align: left;">PARRITA</td>
<td style="text-align: right;">17</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GUANACASTE</td>
<td style="text-align: left;">LIBERIA</td>
<td style="text-align: right;">16</td>
</tr>
<tr class="even">
<td style="text-align: left;">PUNTARENAS</td>
<td style="text-align: left;">CORREDORES</td>
<td style="text-align: right;">16</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CARTAGO</td>
<td style="text-align: left;">LA UNION</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">PUNTARENAS</td>
<td style="text-align: left;">QUEPOS</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ALAJUELA</td>
<td style="text-align: left;">SAN RAMON</td>
<td style="text-align: right;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">PUNTARENAS</td>
<td style="text-align: left;">GARABITO</td>
<td style="text-align: right;">13</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">PEREZ ZELEDON</td>
<td style="text-align: right;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">GUANACASTE</td>
<td style="text-align: left;">CARRILLO</td>
<td style="text-align: right;">11</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CARTAGO</td>
<td style="text-align: left;">TURRIALBA</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">LIMON</td>
<td style="text-align: left;">GUACIMO</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LIMON</td>
<td style="text-align: left;">TALAMANCA</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">ESCAZU</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">ASERRI</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">TIBAS</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">VASQUEZ DE CORONADO</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">ALAJUELA</td>
<td style="text-align: left;">LOS CHILES</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GUANACASTE</td>
<td style="text-align: left;">CANAS</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">CURRIDABAT</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">MONTES DE OCA</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">GUANACASTE</td>
<td style="text-align: left;">ABANGARES</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PUNTARENAS</td>
<td style="text-align: left;">ESPARZA</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">PUNTARENAS</td>
<td style="text-align: left;">GOLFITO</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PUNTARENAS</td>
<td style="text-align: left;">OSA</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">ALAJUELA</td>
<td style="text-align: left;">GRECIA</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CARTAGO</td>
<td style="text-align: left;">EL GUARCO</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">GUANACASTE</td>
<td style="text-align: left;">LA CRUZ</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HEREDIA</td>
<td style="text-align: left;">SAN RAFAEL</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">ALAJUELA</td>
<td style="text-align: left;">ATENAS</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ALAJUELA</td>
<td style="text-align: left;">GUATUSO</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">ALAJUELA</td>
<td style="text-align: left;">NARANJO</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ALAJUELA</td>
<td style="text-align: left;">OROTINA</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARTAGO</td>
<td style="text-align: left;">OREAMUNO</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GUANACASTE</td>
<td style="text-align: left;">BAGACES</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">HEREDIA</td>
<td style="text-align: left;">SANTO DOMINGO</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PUNTARENAS</td>
<td style="text-align: left;">MONTES DE ORO</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">LEON CORTES</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">MORAVIA</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">ALAJUELA</td>
<td style="text-align: left;">POAS</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ALAJUELA</td>
<td style="text-align: left;">UPALA</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARTAGO</td>
<td style="text-align: left;">ALVARADO</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GUANACASTE</td>
<td style="text-align: left;">TILARAN</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">HEREDIA</td>
<td style="text-align: left;">SANTA BARBARA</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PUNTARENAS</td>
<td style="text-align: left;">COTO BRUS</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">MORA</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ALAJUELA</td>
<td style="text-align: left;">RIO CUARTO</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARTAGO</td>
<td style="text-align: left;">JIMENEZ</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GUANACASTE</td>
<td style="text-align: left;">NANDAYURE</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">HEREDIA</td>
<td style="text-align: left;">BARVA</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HEREDIA</td>
<td style="text-align: left;">FLORES</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">HEREDIA</td>
<td style="text-align: left;">SAN PABLO</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PUNTARENAS</td>
<td style="text-align: left;">BUENOS AIRES</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">PURISCAL</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">SANTA ANA</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">SAN JOSE</td>
<td style="text-align: left;">TARRAZU</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cantidad de registros por delito y subdelito</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>delitos_2023 <span class="sc">|&gt;</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Delito, SubDelito) <span class="sc">|&gt;</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Delito</th>
<th style="text-align: left;">SubDelito</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">POR DESCUIDO</td>
<td style="text-align: right;">8326</td>
</tr>
<tr class="even">
<td style="text-align: left;">ROBO</td>
<td style="text-align: left;">FORZADURA</td>
<td style="text-align: right;">6066</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">ARMA DE FUEGO</td>
<td style="text-align: right;">4915</td>
</tr>
<tr class="even">
<td style="text-align: left;">TACHA DE VEHICULO</td>
<td style="text-align: left;">TACHA DE VEHICULO</td>
<td style="text-align: right;">3863</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">ARMA BLANCA</td>
<td style="text-align: right;">2925</td>
</tr>
<tr class="even">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">POR CONFIANZA</td>
<td style="text-align: right;">2924</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">CARTERISTA</td>
<td style="text-align: right;">2869</td>
</tr>
<tr class="even">
<td style="text-align: left;">ROBO DE VEHICULO</td>
<td style="text-align: left;">DESCUIDO</td>
<td style="text-align: right;">2356</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">ARREBATO</td>
<td style="text-align: right;">1915</td>
</tr>
<tr class="even">
<td style="text-align: left;">ROBO</td>
<td style="text-align: left;">BOQUETE</td>
<td style="text-align: right;">1385</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ROBO</td>
<td style="text-align: left;">ESCALAMIENTO</td>
<td style="text-align: right;">1274</td>
</tr>
<tr class="even">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">GOLPES</td>
<td style="text-align: right;">1248</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ROBO DE VEHICULO</td>
<td style="text-align: left;">ASALTO</td>
<td style="text-align: right;">1070</td>
</tr>
<tr class="even">
<td style="text-align: left;">ROBO DE VEHICULO</td>
<td style="text-align: left;">COCHERAZO</td>
<td style="text-align: right;">750</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">ARDID PREVIO/DISTRACCION</td>
<td style="text-align: right;">728</td>
</tr>
<tr class="even">
<td style="text-align: left;">ROBO</td>
<td style="text-align: left;">CORTA CANDADOS</td>
<td style="text-align: right;">695</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ROBO</td>
<td style="text-align: left;">RUPTURA VENTANA</td>
<td style="text-align: right;">682</td>
</tr>
<tr class="even">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">INTIMIDACION VERBAL</td>
<td style="text-align: right;">666</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HOMICIDIO</td>
<td style="text-align: left;">AJUSTE DE CUENTAS/VENGANZA</td>
<td style="text-align: right;">633</td>
</tr>
<tr class="even">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">OTRO O INDETERMINADO</td>
<td style="text-align: right;">633</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ROBO</td>
<td style="text-align: left;">QUITAN CELOSIAS</td>
<td style="text-align: right;">502</td>
</tr>
<tr class="even">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">CON LLAVE</td>
<td style="text-align: right;">484</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ROBO DE VEHICULO</td>
<td style="text-align: left;">POR CONFIANZA</td>
<td style="text-align: right;">399</td>
</tr>
<tr class="even">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">CANDADO CHINO</td>
<td style="text-align: right;">352</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ROBO</td>
<td style="text-align: left;">OTRO O INDETERMINADO</td>
<td style="text-align: right;">345</td>
</tr>
<tr class="even">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">INMOVILIZACION</td>
<td style="text-align: right;">331</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">PROGRESIVOS</td>
<td style="text-align: right;">233</td>
</tr>
<tr class="even">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">ARMA CONTUNDENTE</td>
<td style="text-align: right;">170</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">OTRO O INDETERMINADO</td>
<td style="text-align: right;">149</td>
</tr>
<tr class="even">
<td style="text-align: left;">ROBO DE VEHICULO</td>
<td style="text-align: left;">OTRO O INDETERMINADO</td>
<td style="text-align: right;">133</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HOMICIDIO</td>
<td style="text-align: left;">DISCUSION/RIÑA</td>
<td style="text-align: right;">118</td>
</tr>
<tr class="even">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">RETIRO DE CAJERO AUTOMATICO</td>
<td style="text-align: right;">116</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HOMICIDIO</td>
<td style="text-align: left;">POR LA COMISION DE OTRO DELITO</td>
<td style="text-align: right;">83</td>
</tr>
<tr class="even">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">USO DE SOMNIFERO</td>
<td style="text-align: right;">74</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ROBO DE VEHICULO</td>
<td style="text-align: left;">ARDID PREVIO</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="even">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">GANZUA/VARILLA</td>
<td style="text-align: right;">47</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HOMICIDIO</td>
<td style="text-align: left;">VIOLENCIA DOMESTICA</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="even">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">USO DE GAS</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HOMICIDIO</td>
<td style="text-align: left;">OTRO O INDETERMINADO</td>
<td style="text-align: right;">16</td>
</tr>
<tr class="even">
<td style="text-align: left;">HOMICIDIO</td>
<td style="text-align: left;">REPELIENDO ACTIVIDAD CRIMINAL</td>
<td style="text-align: right;">12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HOMICIDIO</td>
<td style="text-align: left;">PROFESIONAL</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">HOMICIDIO</td>
<td style="text-align: left;">NO DETERMINADO</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HURTO</td>
<td style="text-align: left;">DESCONOCIDO</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">ASALTO</td>
<td style="text-align: left;">DESCONOCIDO</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ROBO</td>
<td style="text-align: left;">DESCONOCIDO</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">HOMICIDIO</td>
<td style="text-align: left;">FEMICIDIO</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Ejemplo de cálculos sin agrupamiento:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Promedio de masa y n cantidad de registros de pingüinos</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">body_mass_g_mean =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> <span class="fu">n</span>())</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  body_mass_g_mean     n
             &lt;dbl&gt; &lt;int&gt;
1            4202.   344</code></pre>
</div>
</div>
</section>
<section id="otras" class="level3" data-number="8.3.6">
<h3 data-number="8.3.6" class="anchored" data-anchor-id="otras"><span class="header-section-number">8.3.6</span> Otras</h3>
<section id="distinct" class="level4" data-number="8.3.6.1">
<h4 data-number="8.3.6.1" class="anchored" data-anchor-id="distinct"><span class="header-section-number">8.3.6.1</span> distinct()</h4>
<p>La función <a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct()</a> retorna las combinaciones únicas de filas en un data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Valores distintos de la columna Victima</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>delitos_2023 <span class="sc">|&gt;</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Victima) <span class="sc">|&gt;</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Victima</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">PERSONA</td>
</tr>
<tr class="even">
<td style="text-align: left;">VIVIENDA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VEHICULO</td>
</tr>
<tr class="even">
<td style="text-align: left;">EDIFICACION</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OTROS</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="count" class="level4" data-number="8.3.6.2">
<h4 data-number="8.3.6.2" class="anchored" data-anchor-id="count"><span class="header-section-number">8.3.6.2</span> count()</h4>
<p>Una forma alternativa a <code>summarize()</code> para realizar un conteo es con la función <a href="https://dplyr.tidyverse.org/reference/count.html">count()</a>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Conteo de delitos por tipo de Victima</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>delitos_2023 <span class="sc">|&gt;</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Victima)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  Victima         n
  &lt;chr&gt;       &lt;int&gt;
1 EDIFICACION  6981
2 OTROS        1946
3 PERSONA     19448
4 VEHICULO    11476
5 VIVIENDA     9758</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Expresión equivalente con summarize</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>delitos_2023 <span class="sc">|&gt;</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Victima) <span class="sc">|&gt;</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Victima</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">EDIFICACION</td>
<td style="text-align: right;">6981</td>
</tr>
<tr class="even">
<td style="text-align: left;">OTROS</td>
<td style="text-align: right;">1946</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PERSONA</td>
<td style="text-align: right;">19448</td>
</tr>
<tr class="even">
<td style="text-align: left;">VEHICULO</td>
<td style="text-align: right;">11476</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VIVIENDA</td>
<td style="text-align: right;">9758</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
</section>
<section id="ejercicios" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="ejercicios"><span class="header-section-number">8.4</span> Ejercicios</h2>
<p>Utilice las funciones de dplyr para responder a las siguientes preguntas sobre el conjunto de datos <code>penguins</code>:</p>
<ol type="1">
<li>¿Cuántos individuos de cada sexo hay en cada especie?</li>
<li>¿Cuál es el mínimo, máximo y promedio de masa corporal (peso) por especie y sexo?</li>
<li>¿Cuántos individuos se observaron durante cada año?</li>
<li>¿Cuántos individuos de cada especie se observaron durante cada año?</li>
<li>¿Cuántos individuos de cada especie y cada sexo se observaron durante cada año?</li>
<li>¿Cuál es el promedio de masa corporal (peso) por año?</li>
<li>¿Cuál es el promedio de masa corporal (peso) por año para cada especie?</li>
</ol>
</section>
<section id="recursos-de-interés" class="level2" data-number="8.5">
<h2 data-number="8.5" class="anchored" data-anchor-id="recursos-de-interés"><span class="header-section-number">8.5</span> Recursos de interés</h2>
<p>RStudio. (2017). <em>Data transformation with dplyr::Cheat Sheet</em>. <a href="https://github.com/rstudio/cheatsheets/blob/45c1e642468695830fd8b724587ccfe8901e2185/data-transformation.pdf" class="uri">https://github.com/rstudio/cheatsheets/blob/45c1e642468695830fd8b724587ccfe8901e2185/data-transformation.pdf</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./07-tidyverse.html" class="pagination-link" aria-label="Tidyverse - colección de paquetes para ciencia de datos">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Tidyverse - colección de paquetes para ciencia de datos</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./09-ggplot2-plotly.html" class="pagination-link" aria-label="ggplot2 y plotly - creación declarativa de gráficos interactivos">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">ggplot2 y plotly - creación declarativa de gráficos interactivos</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>